import sys
from types import FrameType
from typing import Any, Callable, Optional

# Constant defining the name of the sensitive variable to be hidden during tracing.
SENSITIVE_VARIABLE_NAME = 'my_secret_variable'

def scrub_sensitive_variable(
    frame: FrameType, 
    event: str, 
    arg: Any
) -> Optional[Callable]:
    """
    High-performance trace function designed to immediately delete a specific 
    sensitive local variable from the frame's locals dictionary.

    This function executes frequently (on every line/event), making performance 
    critical. It ensures the variable is not persisted or exposed during tracing.
    """
    # Direct access to frame locals (f_locals) is the fastest method.
    f_locals = frame.f_locals

    # Check and delete in a single optimized block. 
    # This minimizes overhead in the high-frequency trace context.
    if SENSITIVE_VARIABLE_NAME in f_locals:
        del f_locals[SENSITIVE_VARIABLE_NAME]

    # Must return the function itself to continue tracing the next line/event.
    return scrub_sensitive_variable

# Apply the trace function globally.
sys.settrace(scrub_sensitive_variable)